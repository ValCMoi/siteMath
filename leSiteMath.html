<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="monCss.css">
    <script type="text/javascript" src="math_functions.js"></script>
    <script>

        var pointDepart;
        var pointTrajectoire;
        var ellipse;

        function dessineBillard() {

            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.beginPath();
            ctx.lineWidth = "1";
            var a = parseInt(document.getElementById("inputA").value);
            var b = parseInt(document.getElementById("inputB").value);


            ctx.ellipse(500, 500, a, b, 0, 0, 2 * Math.PI);
            ellipse = new Ellipse(a, b);

            ctx.stroke();
            dessineBoule();
            dessinePointTrajectoire();
            dessineLigneTrajectoire0();

            var tmp = calculerRebond(ellipse, pointDepart, pointTrajectoire);
            tmp.point.draw(ctx, 'red', 5, 500, 500);
            tmp.pointTraj.draw(ctx, 'black', 5, 500, 500);
            console.log(tmp.point);
            console.log(tmp.pointTraj);

            dessineLigne0();
        }

        function dessineBoule() {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            var xb = document.getElementById("inputxb").value;
            var yb = document.getElementById("inputyb").value;

            xb = parseInt(xb);
            yb = parseInt(yb);

            pointDepart = new Point(xb,yb);
            pointDepart.draw(ctx,'black',5,500,500,2);
        }

        function dessinePointTrajectoire() {

            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            var xt = document.getElementById("inputxt").value;
            var yt = document.getElementById("inputyt").value;

            xt = parseInt(xt);
            yt = parseInt(yt);

            pointTrajectoire = new Point(xt,yt);
            pointTrajectoire.draw(ctx,'cyan',5,500,500,15);
        }


        function dessineLigneTrajectoire0() {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            ctx.beginPath();


            var xt = document.getElementById("inputxt").value;
            var yt = document.getElementById("inputyt").value;

            var xb = document.getElementById("inputxb").value;
            var yb = document.getElementById("inputyb").value;


            var s = new Segment(pointDepart,pointTrajectoire);
            s.draw(ctx,'green',500,500,5);
ctx.closePath();
        }

        function dessineDroite(a, c) {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            ctx.beginPath();

            var alpha = a;
            var constante = c;

            alpha *= -1;
            ctx.width = "2";
            ctx.strokeStyle = 'blue';

            ctx.moveTo(0, alpha * 0 + constante);
            ctx.lineTo(1000, alpha * 1000 + constante);

            ctx.stroke();

            ctx.strokeStyle = 'black';
        }

        function dessineLigne0() {

            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            var a = document.getElementById("inputA").value;
            var b = document.getElementById("inputB").value;
            var n = document.getElementById("inputN").value;

            a = parseInt(a);
            b = parseInt(b);

            var e = new Ellipse(a,b);
            var d = new Droite(pointDepart,pointTrajectoire);

            var p = calculerNRebonds(e,pointDepart,pointTrajectoire,n);

            p[0].draw(ctx,'purple',5,500,500,"2");
        }


    </script>
</head>
<body>


<p>Foyer A et Foyer B</p>
<input type="range" value="25" max="250" min="150" div id="inputA">
<input type="range" value="25" max="250" min="150" div id="inputB"><br>

<p>Position x et position y de la boule</p>
<input type="range" value="25" max="100" min="-100" div id="inputxb">
<input type="range" value="25" max="100" min="-100" div id="inputyb"><br>


<p>Position x et y du point trajectoire</p>
<input type="range" value="0" max="100" min="-100" div id="inputxt">
<input type="range" value="0" max="100" min="-100" div id="inputyt"><br>


<p>N = nombre de rebond</p>
<input type="range" value="0" max="100" min="1" div id="inputN"><br>


<button id="btnDessin" onclick="dessineBillard()">Dessiner le billard</button>
<br>



<canvas height="1000" width="1000" id="canvas" style="  width: 1000px; height:1000px;"></canvas>

<div id="slider"></div>


</body>
</html>